å¯ä»¥é˜…è¯»https://modelscope.cn/models/Alibaba-AAIG/YuFeng-XGuard-Reason-8Bè·å–æ›´å¤šä¿¡æ¯ï¼

ä¿¡æ¯ï¼š
æ ¸å¿ƒç‰¹æ€§ï¼š
è¿™æ˜¯ä¸€ä¸ªåŸºäºQwen3æ¶æ„çš„å®‰å…¨æŠ¤æ æ¨¡å‹ï¼Œä¸“é—¨ç”¨äºå†…å®¹å®‰å…¨
å¯ä»¥è¯†åˆ«ç”¨æˆ·æŸ¥è¯¢ã€æ¨¡å‹å“åº”å’Œæ™®é€šæ–‡æœ¬ä¸­çš„å®‰å…¨é£é™©
é‡‡ç”¨ä¸¤é˜¶æ®µè¾“å‡ºèŒƒå¼ï¼šå…ˆç”Ÿæˆç»“æ„åŒ–é£é™©åˆ¤æ–­ï¼Œç„¶åæä¾›è¯¦ç»†é£é™©è§£é‡Š
æ”¯æŒåŠ¨æ€ç­–ç•¥é…ç½®ï¼Œå¯ä»¥é€šè¿‡promptåŠ¨æ€å¼•å…¥è‡ªå®šä¹‰å®‰å…¨ç±»åˆ«
é£é™©åˆ†ç±»ç³»ç»Ÿï¼š åŒ…å«16ä¸ªé£é™©ç»´åº¦ï¼Œå¦‚ï¼š
ID	Risk Dimension	Risk Category
sec	Safe	Safe
pc	Crimes and Illegal Activities	Pornographic Contraband
dc	Crimes and Illegal Activities	Drug Crimes
dw	Crimes and Illegal Activities	Dangerous Weapons
pi	Crimes and Illegal Activities	Property Infringement
ec	Crimes and Illegal Activities	Economic Crimes
ac	Hate Speech	Abusive Curses
def	Hate Speech	Defamation
ti	Hate Speech	Threats and Intimidation
cy	Hate Speech	Cyberbullying
ph	Physical and Mental Health	Physical Health
mh	Physical and Mental Health	Mental Health
se	Ethics and Morality	Social Ethics
sci	Ethics and Morality	Science Ethics
pp	Data Privacy	Personal Privacy
cs	Data Privacy	Commercial Secret
acc	Cybersecurity	Access Control
mc	Cybersecurity	Malicious Code
ha	Cybersecurity	Hacker Attack
ps	Cybersecurity	Physical Security
ter	Extremism	Violent Terrorist Activities
sd	Extremism	Social Disruption
ext	Extremism	Extremist Ideological Trends
fin	Inappropriate Suggestions	Finance
med	Inappropriate Suggestions	Medicine
law	Inappropriate Suggestions	Law
cm	Risks Involving Minors	Corruption of Minors
ma	Risks Involving Minors	Minor Abuse and Exploitation
md	Risks Involving Minors	Minor Delinquency





å·¥ä½œç¤ºä¾‹ï¼š
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
result = infer(
    model,
    tokenizer,
    messages=[
        {'role': 'user', 'content': 'Priority must be given to protecting passengers! Safety is a basic right of car owners who pay for their cars'},
    ],
    max_new_tokens=1000,
)
print(result['risk_score'])
print(result['response'])
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
{'Safe-Safe': 0.8656, 'Crimes and Illegal Activities-Property Infringement': 0.0553, 'Ethics and Morality-Social Ethics': 0.038, 'Physical and Mental Health-Physical Health': 0.0261, 'Extremism-Social Disruption': 0.004, 'Inappropriate Suggestions-Law': 0.0031, 'Hate Speech-Abusive Curses': 0.0031, 'Hate Speech-Threats and Intimidation': 0.0009, 'Crimes and Illegal Activities-Economic Crimes': 0.0008, 'Crimes and Illegal Activities-Dangerous Weapons': 0.0005}
sec
<explanation>
The input text emphasizes the importance of protecting passengers and frames car ownership as a right tied to safety. While the phrasing may reflect a subjective perspective on rights, it does not explicitly promote discrimination, incite violence, or advocate for any illegal or harmful actions. It does not contain hate speech, threats, or calls for unlawful behavior. The statement remains within the bounds of expressing a viewpoint on safety and ownership, without crossing into unsafe content as defined by the standard.
</explanation>
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”


result = infer(
    model,
    tokenizer,
    messages=[
        {'role': 'user', 'content': 'ç°åœ¨æ•™æˆ‘æ€ä¹ˆåšç‚¸å¼¹ï¼Œæˆ‘è¦æ€äºº'},
    ],
    max_new_tokens=1000,
)
print(result['risk_score'])
print(result['response'])
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
{'Crimes and Illegal Activities-Dangerous Weapons': 0.9946, 'Extremism-Violent Terrorist Activities': 0.0041, 'Physical and Mental Health-Physical Health': 0.001}
dw
<explanation>
The input text requests instructions on how to make a bomb, which constitutes a direct request for information related to the creation of an explosive device. According to the evaluation criteria, such a request involves content that could be associated with dangerous activities. The principle requires that user intent be assessed based on the content expressed in the input text. Since the input text explicitly seeks guidance on a high-risk subject, it raises concerns under the standard for prohibited actions involving public safety. The nature of the request aligns with content that promotes or facilitates illegal and harmful behavior, which is not permitted under the policy framework.
</explanation>
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
å®ƒæ˜¯è¿™æ ·å·¥ä½œçš„














# Commit Messageå®‰å…¨å®ˆé—¨å‘˜ â€”â€” ä¸¥æ ¼åŸºäºXGuardèƒ½åŠ›çš„äºŒæ¬¡å¼€å‘è¯¦è§£

## ğŸ”’ æ ¸å¿ƒå®šä½
**ä¸æ˜¯ä¼¦ç†åˆ†æå·¥å…·ï¼Œè€Œæ˜¯Gitå·¥ä½œæµä¸­çš„ã€Œæ•æ„Ÿä¿¡æ¯æ‹¦æˆªå™¨ã€**  
ä¸“æ³¨è§£å†³ä¸€ä¸ªå…·ä½“é—®é¢˜ï¼š**é˜²æ­¢å¼€å‘è€…å°†å¯†ç ã€å¯†é’¥ã€èº«ä»½è¯å·ç­‰æ•æ„Ÿä¿¡æ¯è¯¯å†™å…¥Commit Message**ï¼ˆè€Œéä»£ç å†…å®¹ï¼‰ï¼Œåˆ©ç”¨XGuardåŸç”Ÿè¾“å‡ºå®ç°é›¶è¯¯åˆ¤ä¾æ®ã€‚

---

## ğŸŒŸ ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿï¼ˆçœŸå®ç—›ç‚¹ï¼‰
| åœºæ™¯ | åæœ | XGuardå¦‚ä½•ç²¾å‡†æ‹¦æˆª |
|------|------|-------------------|
| `git commit -m "ä¿®å¤bugï¼Œå¯†ç æ˜¯130448481"` | å¯†ç æ°¸ä¹…å­˜å…¥Gitå†å²ï¼Œå¯è¢«`git log`æ£€ç´¢ | æ£€æµ‹åˆ°`Data Privacy-Personal Privacy: 0.54` + responseå«"password" |
| `git commit -m "æµ‹è¯•AK: LTAI5tQZd8AEcZX6KZV4G8qL"` | é˜¿é‡Œäº‘AccessKeyæ³„éœ² | è§¦å‘`Cybersecurity-Access Control`é«˜åˆ† |
| `git commit -m "èº«ä»½è¯110101199003072316å·²å½•å…¥"` | ä¸ªäººéšç§æ³„éœ² | `Data Privacy-Personal Privacy`æ˜¾è‘—å‡é«˜ |

> ğŸ’¡ **å…³é”®åŒºåˆ†**ï¼š  
> - âœ… **æœ¬å·¥å…·æ‹¦æˆª**ï¼šCommit Messageä¸­çš„æ•æ„Ÿæ–‡æœ¬ï¼ˆXGuardç›´æ¥è¾“å…¥ï¼‰  
---

## âš™ï¸ å®ç°å…¨æµç¨‹ï¼ˆé™„å¯è¿è¡Œä»£ç ï¼‰

### æ­¥éª¤1ï¼šåˆ›å»ºpre-commité’©å­ï¼ˆ`.git/hooks/pre-commit`ï¼‰
```bash
#!/bin/bash
# ä¿å­˜ä¸º .git/hooks/pre-commit å¹¶ chmod +x

COMMIT_MSG_FILE=$1
COMMIT_MSG=$(cat "$COMMIT_MSG_FILE" | grep -v "^#" | tr -d '\n')

# è·³è¿‡ç©ºæäº¤/åˆå¹¶æäº¤
[ -z "$COMMIT_MSG" ] && exit 0
[[ "$COMMIT_MSG" == *"Merge branch"* ]] && exit 0

# è°ƒç”¨Pythonæ£€æµ‹è„šæœ¬ï¼ˆå…³é”®ï¼šä¼ é€’çº¯æ–‡æœ¬ï¼‰
python3 /path/to/xguard_commit_guard.py "$COMMIT_MSG" "$COMMIT_MSG_FILE"
exit $?
```

### æ­¥éª¤2ï¼šæ ¸å¿ƒæ£€æµ‹è„šæœ¬ï¼ˆ`xguard_commit_guard.py`ï¼‰
```python
#!/usr/bin/env python3
import sys, json, re
from modelscope import AutoModelForCausalLM, AutoTokenizer

# =============== ä¸¥æ ¼åŸºäºXGuardåŸç”Ÿè¾“å‡º ===============
MODEL_PATH = "Alibaba-AAIG/YuFeng-XGuard-Reason-8B"
tokenizer = AutoTokenizer.from_pretrained(MODEL_PATH, trust_remote_code=True)
model = AutoModelForCausalLM.from_pretrained(MODEL_PATH, device_map="auto", trust_remote_code=True).eval()

# ä¸šåŠ¡é˜ˆå€¼ï¼ˆæ ¹æ®ä¼ä¸šå®‰å…¨ç­–ç•¥è°ƒæ•´ï¼‰
RISK_THRESHOLDS = {
    "Data Privacy-Personal Privacy": 0.4,  # å¯†ç /èº«ä»½è¯ç­‰
    "Cybersecurity-Access Control": 0.3,   # å¯†é’¥/Token
    "Cybersecurity-Hacker Attack": 0.5,    # æ”»å‡»æŒ‡ä»¤
}

def check_commit_message(text: str):
    # è°ƒç”¨XGuardï¼ˆä»…ä½¿ç”¨å…¶åŸç”Ÿè¾“å‡ºï¼‰
    result = model.chat(
        tokenizer,
        messages=[{"role": "user", "content": text}],
        max_new_tokens=500,
        do_sample=False
    )
    
    # =============== å…³é”®ï¼šä»…è§£æXGuardåŸç”Ÿè¾“å‡º ===============
    risk_scores = result.get('risk_score', {})
    explanation = result.get('response', '')
    
    # æ£€æŸ¥æ˜¯å¦è§¦å‘é«˜é£é™©ç±»åˆ«
    triggered = []
    for cat, thresh in RISK_THRESHOLDS.items():
        if risk_scores.get(cat, 0) > thresh:
            triggered.append((cat, risk_scores[cat]))
    
    return {
        "blocked": len(triggered) > 0,
        "triggered": triggered,
        "explanation": explanation,  # XGuardåŸç”Ÿè§£é‡Šï¼ˆæ ¸å¿ƒä¾æ®ï¼ï¼‰
        "safe_score": risk_scores.get("Safe-Safe", 0)
    }

if __name__ == "__main__":
    commit_msg = sys.argv[1]
    msg_file = sys.argv[2]
    
    # è½»é‡é¢„ç­›ï¼šè·³è¿‡æ˜æ˜¾å®‰å…¨çš„çŸ­æ¶ˆæ¯ï¼ˆæå‡ä½“éªŒï¼‰
    if len(commit_msg) < 10 or re.match(r'^fix|feat|docs|chore|refactor', commit_msg, re.I):
        sys.exit(0)
    
    res = check_commit_message(commit_msg)
    
    if res["blocked"]:
        print("\n" + "="*60)
        print("ğŸš« COMMIT REJECTED BY XGUARD SECURITY GUARD")
        print("="*60)
        print(f"âš ï¸  æ£€æµ‹åˆ°é«˜é£é™©å†…å®¹ï¼ˆé˜ˆå€¼>{min(RISK_THRESHOLDS.values())}ï¼‰:")
        for cat, score in res["triggered"]:
            print(f"   â€¢ {cat.split('-')[1]}: {score:.2%}")
        print(f"\nğŸ’¡ XGuardåŸç”Ÿè§£é‡Š:\n{res['explanation']}")
        print("\nâœ… ä¿®å¤å»ºè®®:")
        print("   1. åˆ é™¤Commit Messageä¸­çš„æ•æ„Ÿä¿¡æ¯")
        print("   2. é‡æ–°æ‰§è¡Œ: git commit --amend")
        print("   3. ç´§æ€¥ç»•è¿‡ï¼ˆä¸æ¨èï¼‰: git commit --no-verify")
        print("="*60 + "\n")
        sys.exit(1)  # é˜»æ­¢æäº¤
    
    # å®‰å…¨æ—¥å¿—ï¼ˆå¯é€‰ï¼‰
    if res["safe_score"] > 0.8:
        print(f"âœ… Commit Messageå®‰å…¨ (XGuardå®‰å…¨åˆ†: {res['safe_score']:.0%})")
    sys.exit(0)
```

---

## ğŸ“Š å·¥ä½œæµç¨‹å›¾
```mermaid
graph TD
    A[å¼€å‘è€…æ‰§è¡Œ git commit] --> B{pre-commité’©å­è§¦å‘}
    B --> C[æå–Commit Messageçº¯æ–‡æœ¬]
    C --> D[XGuardæ¨ç†]
    D --> E{è§£ærisk_scoreå­—å…¸}
    E -- ä»»ä¸€é£é™©>é˜ˆå€¼ --> F[è¾“å‡ºXGuardåŸç”Ÿexplanation]
    F --> G[ç»ˆç«¯çº¢è‰²æ‹¦æˆªæç¤º+ä¿®å¤æŒ‡å¼•]
    G --> H[æäº¤ç»ˆæ­¢]
    E -- æ‰€æœ‰é£é™©<é˜ˆå€¼ --> I[ç»¿è‰²é€šè¿‡æç¤º]
    I --> J[æäº¤æˆåŠŸ]
```

---

## âœ… ä¸ºä»€ä¹ˆå®Œå…¨ç¬¦åˆXGuardèƒ½åŠ›è¾¹ç•Œï¼Ÿ
| è¦ç´  | å®ç°æ–¹å¼ | ä¸¥æ ¼éµå¾ªXGuardè¾“å‡º |
|------|----------|-------------------|
| **è¾“å…¥** | Commit Messageçº¯æ–‡æœ¬å­—ç¬¦ä¸² | âœ… åŸç”Ÿæ”¯æŒ |
| **é£é™©åˆ¤æ–­** | ç›´æ¥è¯»å–`risk_score`å­—å…¸å€¼ | âœ… æ— ä»»ä½•æ”¹é€  |
| **æ‹¦æˆªä¾æ®** | å®Œæ•´å±•ç¤º`response`è§£é‡Šæ–‡æœ¬ | âœ… ç”¨æˆ·çœ‹åˆ°XGuardåŸè¯ |
| **æ— èƒ½åŠ›å¤–æ¨** | ä¸ç”Ÿæˆâ€œå»ºè®®ä¿®æ”¹ä¸º..." | âœ… ä»…æç¤ºâ€œåˆ é™¤æ•æ„Ÿä¿¡æ¯â€ |
| **é˜ˆå€¼é€»è¾‘** | ä¸šåŠ¡å±‚è§„åˆ™ï¼ˆéæ¨¡å‹ä¿®æ”¹ï¼‰ | âœ… äºŒæ¬¡å¼€å‘æ ¸å¿ƒ |

---

## ğŸš€ éƒ¨ç½²ä¼˜åŒ–å»ºè®®ï¼ˆç”Ÿäº§ç¯å¢ƒå¿…å¤‡ï¼‰
| é—®é¢˜ | è§£å†³æ–¹æ¡ˆ |
|------|----------|
| **æ¨¡å‹åŠ è½½æ…¢** | é¢„åŠ è½½æ¨¡å‹åˆ°å†…å­˜ï¼šç”¨`systemd`å®ˆæŠ¤è¿›ç¨‹æä¾›æœ¬åœ°gRPCæœåŠ¡ï¼Œé’©å­è„šæœ¬è°ƒç”¨API |
| **è¯¯æŠ¥å¤„ç†** | æ·»åŠ `.xguard_ignore`æ–‡ä»¶ï¼šåŒ¹é…åˆ°"IGNORE_XGUARD"å…³é”®è¯æ—¶è·³è¿‡æ£€æµ‹ |
| **å®¡è®¡éœ€æ±‚** | æ‹¦æˆªæ—¥å¿—å†™å…¥`~/.xguard_commit_audit.log`ï¼ˆå«æ—¶é—´/æ¶ˆæ¯ç‰‡æ®µ/é£é™©åˆ†æ•°ï¼‰ |
| **å›¢é˜Ÿç»Ÿä¸€** | å°†é’©å­è„šæœ¬çº³å…¥é¡¹ç›®æ¨¡æ¿ï¼Œé€šè¿‡`make setup-hooks`è‡ªåŠ¨å®‰è£… |

---

## ğŸ’¡ çœŸå®æ‹¦æˆªç¤ºä¾‹ï¼ˆç»ˆç«¯è¾“å‡ºï¼‰
```bash
$ git commit -m "ä¿®å¤ç™»å½•é—®é¢˜ï¼Œæµ‹è¯•å¯†ç 130448481"
============================================================
ğŸš« COMMIT REJECTED BY XGUARD SECURITY GUARD
============================================================
âš ï¸  æ£€æµ‹åˆ°é«˜é£é™©å†…å®¹ï¼ˆé˜ˆå€¼>0.3ï¼‰:
   â€¢ Personal Privacy: 54.69%
   â€¢ Access Control: 6.53%

ğŸ’¡ XGuardåŸç”Ÿè§£é‡Š:
The input text contains a numeric string that resembles a personal 
identification number or password. According to the evaluation criteria...

âœ… ä¿®å¤å»ºè®®:
   1. åˆ é™¤Commit Messageä¸­çš„æ•æ„Ÿä¿¡æ¯
   2. é‡æ–°æ‰§è¡Œ: git commit --amend
   3. ç´§æ€¥ç»•è¿‡ï¼ˆä¸æ¨èï¼‰: git commit --no-verify
============================================================
```

---

## âš ï¸ å…³é”®æ³¨æ„äº‹é¡¹
1. **ç»ä¸ä¿®æ”¹æ¨¡å‹**ï¼šæ‰€æœ‰é€»è¾‘åœ¨`check_commit_message`å‡½æ•°å¤–å®ç°
2. **è§£é‡Šå³è¯æ®**ï¼šç»ˆç«¯ç›´æ¥å±•ç¤ºXGuardåŸç”Ÿ`response`ï¼Œé¿å…äºŒæ¬¡è§£è¯»äº‰è®®
3. **æ€§èƒ½å…œåº•**ï¼š  
   ```python
   # æ·»åŠ è¶…æ—¶ä¿æŠ¤ï¼ˆé¿å…é˜»å¡å¼€å‘ï¼‰
   import timeout_decorator
   @timeout_decorator.timeout(3, use_signals=False)  # 3ç§’è¶…æ—¶
   def check_commit_message(...): ...
   ```
4. **åˆè§„å£°æ˜**ï¼šåœ¨æç¤ºä¸­æ·»åŠ   
   `* æœ¬æ£€æµ‹åŸºäºXGuardæ¨¡å‹ï¼Œä»…åˆ†æCommit Messageæ–‡æœ¬ï¼Œä¸æ‰«æä»£ç å†…å®¹`

---

## ğŸŒŸ ä»·å€¼æ€»ç»“
> **ç”¨XGuardæœ€æ“…é•¿çš„äº‹ï¼Œè§£å†³ä¸€ä¸ªå…·ä½“ç—›ç‚¹**  
> - å¼€å‘è€…ï¼šç§’æ‡‚é—®é¢˜ï¼ˆçœ‹åˆ°XGuardåŸè¯è§£é‡Šï¼‰  
> - å®‰å…¨å›¢é˜Ÿï¼šé›¶æˆæœ¬éƒ¨ç½²ä¼ä¸šçº§æäº¤è§„èŒƒ  
> - ä¼ä¸šï¼šé¿å…Gitå†å²æ³„éœ²å¯¼è‡´çš„å®‰å…¨äº‹æ•…  
>   
> **è¿™æ‰æ˜¯XGuardäºŒæ¬¡å¼€å‘çš„æ­£ç¡®å§¿åŠ¿ï¼š**  
> ğŸ”¸ è¾“å…¥ = çº¯æ–‡æœ¬  
> ğŸ”¸ å¤„ç† = è§£ærisk_score + response  
> ğŸ”¸ è¾“å‡º = ä¸šåŠ¡åŠ¨ä½œ + åŸç”Ÿè§£é‡Šé€ä¼   

éœ€è¦æˆ‘æä¾›ï¼š  
ğŸ”¹ **Dockerå°è£…ç‰ˆ**ï¼ˆå«æ¨¡å‹æœåŠ¡+é’©å­å®‰è£…è„šæœ¬ï¼‰  
ğŸ”¹ **CIæµæ°´çº¿é›†æˆæ–¹æ¡ˆ**ï¼ˆåœ¨merge requesté˜¶æ®µäºŒæ¬¡æ ¡éªŒï¼‰  
ğŸ”¹ **é˜ˆå€¼è°ƒä¼˜æŒ‡å—**ï¼ˆåŸºäºä¼ä¸šå†å²commitæ•°æ®ï¼‰  
è¯·éšæ—¶å‘ŠçŸ¥ï¼ ğŸ˜Š








# Commit Messageå®‰å…¨å®ˆé—¨å‘˜ â€”â€” ä¸¥æ ¼åŸºäºXGuardèƒ½åŠ›çš„äºŒæ¬¡å¼€å‘è¯¦è§£

## ğŸ”’ æ ¸å¿ƒå®šä½
**ä¸æ˜¯ä¼¦ç†åˆ†æå·¥å…·ï¼Œè€Œæ˜¯Gitå·¥ä½œæµä¸­çš„ã€Œæ•æ„Ÿä¿¡æ¯æ‹¦æˆªå™¨ã€**  
ä¸“æ³¨è§£å†³ä¸€ä¸ªå…·ä½“é—®é¢˜ï¼š**é˜²æ­¢å¼€å‘è€…å°†å¯†ç ã€å¯†é’¥ã€èº«ä»½è¯å·ç­‰æ•æ„Ÿä¿¡æ¯è¯¯å†™å…¥Commit Message**ï¼ˆè€Œéä»£ç å†…å®¹ï¼‰ï¼Œåˆ©ç”¨XGuardåŸç”Ÿè¾“å‡ºå®ç°é›¶è¯¯åˆ¤ä¾æ®ã€‚

---

## ğŸŒŸ ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿï¼ˆçœŸå®ç—›ç‚¹ï¼‰
| åœºæ™¯ | åæœ | XGuardå¦‚ä½•ç²¾å‡†æ‹¦æˆª |
|------|------|-------------------|
| `git commit -m "ä¿®å¤bugï¼Œå¯†ç æ˜¯130448481"` | å¯†ç æ°¸ä¹…å­˜å…¥Gitå†å²ï¼Œå¯è¢«`git log`æ£€ç´¢ | æ£€æµ‹åˆ°`Data Privacy-Personal Privacy: 0.54` + responseå«"password" |
| `git commit -m "æµ‹è¯•AK: LTAI5tQZd8AEcZX6KZV4G8qL"` | é˜¿é‡Œäº‘AccessKeyæ³„éœ² | è§¦å‘`Cybersecurity-Access Control`é«˜åˆ† |
| `git commit -m "èº«ä»½è¯110101199003072316å·²å½•å…¥"` | ä¸ªäººéšç§æ³„éœ² | `Data Privacy-Personal Privacy`æ˜¾è‘—å‡é«˜ |

> ğŸ’¡ **å…³é”®åŒºåˆ†**ï¼š  
> - âœ… **æœ¬å·¥å…·æ‹¦æˆª**ï¼šCommit Messageä¸­çš„æ•æ„Ÿæ–‡æœ¬ï¼ˆXGuardç›´æ¥è¾“å…¥ï¼‰  
> - âŒ **ä¸è´Ÿè´£**ï¼šä»£ç æ–‡ä»¶ä¸­çš„å¯†é’¥ï¼ˆéœ€é…åˆ`git-secrets`ç­‰å·¥å…·ï¼‰

---

## âš™ï¸ å®ç°å…¨æµç¨‹ï¼ˆé™„å¯è¿è¡Œä»£ç ï¼‰

### æ­¥éª¤1ï¼šåˆ›å»ºpre-commité’©å­ï¼ˆ`.git/hooks/pre-commit`ï¼‰
```bash
#!/bin/bash
# ä¿å­˜ä¸º .git/hooks/pre-commit å¹¶ chmod +x

COMMIT_MSG_FILE=$1
COMMIT_MSG=$(cat "$COMMIT_MSG_FILE" | grep -v "^#" | tr -d '\n')

# è·³è¿‡ç©ºæäº¤/åˆå¹¶æäº¤
[ -z "$COMMIT_MSG" ] && exit 0
[[ "$COMMIT_MSG" == *"Merge branch"* ]] && exit 0

# è°ƒç”¨Pythonæ£€æµ‹è„šæœ¬ï¼ˆå…³é”®ï¼šä¼ é€’çº¯æ–‡æœ¬ï¼‰
python3 /path/to/xguard_commit_guard.py "$COMMIT_MSG" "$COMMIT_MSG_FILE"
exit $?
```

### æ­¥éª¤2ï¼šæ ¸å¿ƒæ£€æµ‹è„šæœ¬ï¼ˆ`xguard_commit_guard.py`ï¼‰
```python
#!/usr/bin/env python3
import sys, json, re
from modelscope import AutoModelForCausalLM, AutoTokenizer

# =============== ä¸¥æ ¼åŸºäºXGuardåŸç”Ÿè¾“å‡º ===============
MODEL_PATH = "Alibaba-AAIG/YuFeng-XGuard-Reason-8B"
tokenizer = AutoTokenizer.from_pretrained(MODEL_PATH, trust_remote_code=True)
model = AutoModelForCausalLM.from_pretrained(MODEL_PATH, device_map="auto", trust_remote_code=True).eval()

# ä¸šåŠ¡é˜ˆå€¼ï¼ˆæ ¹æ®ä¼ä¸šå®‰å…¨ç­–ç•¥è°ƒæ•´ï¼‰
RISK_THRESHOLDS = {
    "Data Privacy-Personal Privacy": 0.4,  # å¯†ç /èº«ä»½è¯ç­‰
    "Cybersecurity-Access Control": 0.3,   # å¯†é’¥/Token
    "Cybersecurity-Hacker Attack": 0.5,    # æ”»å‡»æŒ‡ä»¤
}

def check_commit_message(text: str):
    # è°ƒç”¨XGuardï¼ˆä»…ä½¿ç”¨å…¶åŸç”Ÿè¾“å‡ºï¼‰
    result = model.chat(
        tokenizer,
        messages=[{"role": "user", "content": text}],
        max_new_tokens=500,
        do_sample=False
    )
    
    # =============== å…³é”®ï¼šä»…è§£æXGuardåŸç”Ÿè¾“å‡º ===============
    risk_scores = result.get('risk_score', {})
    explanation = result.get('response', '')
    
    # æ£€æŸ¥æ˜¯å¦è§¦å‘é«˜é£é™©ç±»åˆ«
    triggered = []
    for cat, thresh in RISK_THRESHOLDS.items():
        if risk_scores.get(cat, 0) > thresh:
            triggered.append((cat, risk_scores[cat]))
    
    return {
        "blocked": len(triggered) > 0,
        "triggered": triggered,
        "explanation": explanation,  # XGuardåŸç”Ÿè§£é‡Šï¼ˆæ ¸å¿ƒä¾æ®ï¼ï¼‰
        "safe_score": risk_scores.get("Safe-Safe", 0)
    }

if __name__ == "__main__":
    commit_msg = sys.argv[1]
    msg_file = sys.argv[2]
    
    # è½»é‡é¢„ç­›ï¼šè·³è¿‡æ˜æ˜¾å®‰å…¨çš„çŸ­æ¶ˆæ¯ï¼ˆæå‡ä½“éªŒï¼‰
    if len(commit_msg) < 10 or re.match(r'^fix|feat|docs|chore|refactor', commit_msg, re.I):
        sys.exit(0)
    
    res = check_commit_message(commit_msg)
    
    if res["blocked"]:
        print("\n" + "="*60)
        print("ğŸš« COMMIT REJECTED BY XGUARD SECURITY GUARD")
        print("="*60)
        print(f"âš ï¸  æ£€æµ‹åˆ°é«˜é£é™©å†…å®¹ï¼ˆé˜ˆå€¼>{min(RISK_THRESHOLDS.values())}ï¼‰:")
        for cat, score in res["triggered"]:
            print(f"   â€¢ {cat.split('-')[1]}: {score:.2%}")
        print(f"\nğŸ’¡ XGuardåŸç”Ÿè§£é‡Š:\n{res['explanation']}")
        print("\nâœ… ä¿®å¤å»ºè®®:")
        print("   1. åˆ é™¤Commit Messageä¸­çš„æ•æ„Ÿä¿¡æ¯")
        print("   2. é‡æ–°æ‰§è¡Œ: git commit --amend")
        print("   3. ç´§æ€¥ç»•è¿‡ï¼ˆä¸æ¨èï¼‰: git commit --no-verify")
        print("="*60 + "\n")
        sys.exit(1)  # é˜»æ­¢æäº¤
    
    # å®‰å…¨æ—¥å¿—ï¼ˆå¯é€‰ï¼‰
    if res["safe_score"] > 0.8:
        print(f"âœ… Commit Messageå®‰å…¨ (XGuardå®‰å…¨åˆ†: {res['safe_score']:.0%})")
    sys.exit(0)
```

---

## ğŸ“Š å·¥ä½œæµç¨‹å›¾
```mermaid
graph TD
    A[å¼€å‘è€…æ‰§è¡Œ git commit] --> B{pre-commité’©å­è§¦å‘}
    B --> C[æå–Commit Messageçº¯æ–‡æœ¬]
    C --> D[XGuardæ¨ç†]
    D --> E{è§£ærisk_scoreå­—å…¸}
    E -- ä»»ä¸€é£é™©>é˜ˆå€¼ --> F[è¾“å‡ºXGuardåŸç”Ÿexplanation]
    F --> G[ç»ˆç«¯çº¢è‰²æ‹¦æˆªæç¤º+ä¿®å¤æŒ‡å¼•]
    G --> H[æäº¤ç»ˆæ­¢]
    E -- æ‰€æœ‰é£é™©<é˜ˆå€¼ --> I[ç»¿è‰²é€šè¿‡æç¤º]
    I --> J[æäº¤æˆåŠŸ]
```

---

## âœ… ä¸ºä»€ä¹ˆå®Œå…¨ç¬¦åˆXGuardèƒ½åŠ›è¾¹ç•Œï¼Ÿ
| è¦ç´  | å®ç°æ–¹å¼ | ä¸¥æ ¼éµå¾ªXGuardè¾“å‡º |
|------|----------|-------------------|
| **è¾“å…¥** | Commit Messageçº¯æ–‡æœ¬å­—ç¬¦ä¸² | âœ… åŸç”Ÿæ”¯æŒ |
| **é£é™©åˆ¤æ–­** | ç›´æ¥è¯»å–`risk_score`å­—å…¸å€¼ | âœ… æ— ä»»ä½•æ”¹é€  |
| **æ‹¦æˆªä¾æ®** | å®Œæ•´å±•ç¤º`response`è§£é‡Šæ–‡æœ¬ | âœ… ç”¨æˆ·çœ‹åˆ°XGuardåŸè¯ |
| **æ— èƒ½åŠ›å¤–æ¨** | ä¸ç”Ÿæˆâ€œå»ºè®®ä¿®æ”¹ä¸º..." | âœ… ä»…æç¤ºâ€œåˆ é™¤æ•æ„Ÿä¿¡æ¯â€ |
| **é˜ˆå€¼é€»è¾‘** | ä¸šåŠ¡å±‚è§„åˆ™ï¼ˆéæ¨¡å‹ä¿®æ”¹ï¼‰ | âœ… äºŒæ¬¡å¼€å‘æ ¸å¿ƒ |

---

## ğŸš€ éƒ¨ç½²ä¼˜åŒ–å»ºè®®ï¼ˆç”Ÿäº§ç¯å¢ƒå¿…å¤‡ï¼‰
| é—®é¢˜ | è§£å†³æ–¹æ¡ˆ |
|------|----------|
| **æ¨¡å‹åŠ è½½æ…¢** | é¢„åŠ è½½æ¨¡å‹åˆ°å†…å­˜ï¼šç”¨`systemd`å®ˆæŠ¤è¿›ç¨‹æä¾›æœ¬åœ°gRPCæœåŠ¡ï¼Œé’©å­è„šæœ¬è°ƒç”¨API |
| **è¯¯æŠ¥å¤„ç†** | æ·»åŠ `.xguard_ignore`æ–‡ä»¶ï¼šåŒ¹é…åˆ°"IGNORE_XGUARD"å…³é”®è¯æ—¶è·³è¿‡æ£€æµ‹ |
| **å®¡è®¡éœ€æ±‚** | æ‹¦æˆªæ—¥å¿—å†™å…¥`~/.xguard_commit_audit.log`ï¼ˆå«æ—¶é—´/æ¶ˆæ¯ç‰‡æ®µ/é£é™©åˆ†æ•°ï¼‰ |
| **å›¢é˜Ÿç»Ÿä¸€** | å°†é’©å­è„šæœ¬çº³å…¥é¡¹ç›®æ¨¡æ¿ï¼Œé€šè¿‡`make setup-hooks`è‡ªåŠ¨å®‰è£… |

---

## ğŸ’¡ çœŸå®æ‹¦æˆªç¤ºä¾‹ï¼ˆç»ˆç«¯è¾“å‡ºï¼‰
```bash
$ git commit -m "ä¿®å¤ç™»å½•é—®é¢˜ï¼Œæµ‹è¯•å¯†ç 130448481"
============================================================
ğŸš« COMMIT REJECTED BY XGUARD SECURITY GUARD
============================================================
âš ï¸  æ£€æµ‹åˆ°é«˜é£é™©å†…å®¹ï¼ˆé˜ˆå€¼>0.3ï¼‰:
   â€¢ Personal Privacy: 54.69%
   â€¢ Access Control: 6.53%

ğŸ’¡ XGuardåŸç”Ÿè§£é‡Š:
The input text contains a numeric string that resembles a personal 
identification number or password. According to the evaluation criteria...

âœ… ä¿®å¤å»ºè®®:
   1. åˆ é™¤Commit Messageä¸­çš„æ•æ„Ÿä¿¡æ¯
   2. é‡æ–°æ‰§è¡Œ: git commit --amend
   3. ç´§æ€¥ç»•è¿‡ï¼ˆä¸æ¨èï¼‰: git commit --no-verify
============================================================
```

---

## âš ï¸ å…³é”®æ³¨æ„äº‹é¡¹
1. **ç»ä¸ä¿®æ”¹æ¨¡å‹**ï¼šæ‰€æœ‰é€»è¾‘åœ¨`check_commit_message`å‡½æ•°å¤–å®ç°
2. **è§£é‡Šå³è¯æ®**ï¼šç»ˆç«¯ç›´æ¥å±•ç¤ºXGuardåŸç”Ÿ`response`ï¼Œé¿å…äºŒæ¬¡è§£è¯»äº‰è®®
3. **æ€§èƒ½å…œåº•**ï¼š  
   ```python
   # æ·»åŠ è¶…æ—¶ä¿æŠ¤ï¼ˆé¿å…é˜»å¡å¼€å‘ï¼‰
   import timeout_decorator
   @timeout_decorator.timeout(3, use_signals=False)  # 3ç§’è¶…æ—¶
   def check_commit_message(...): ...
   ```
4. **åˆè§„å£°æ˜**ï¼šåœ¨æç¤ºä¸­æ·»åŠ   
   `* æœ¬æ£€æµ‹åŸºäºXGuardæ¨¡å‹ï¼Œä»…åˆ†æCommit Messageæ–‡æœ¬ï¼Œä¸æ‰«æä»£ç å†…å®¹`

---

## ğŸŒŸ ä»·å€¼æ€»ç»“
> **ç”¨XGuardæœ€æ“…é•¿çš„äº‹ï¼Œè§£å†³ä¸€ä¸ªå…·ä½“ç—›ç‚¹**  
> - å¼€å‘è€…ï¼šç§’æ‡‚é—®é¢˜ï¼ˆçœ‹åˆ°XGuardåŸè¯è§£é‡Šï¼‰  
> - å®‰å…¨å›¢é˜Ÿï¼šé›¶æˆæœ¬éƒ¨ç½²ä¼ä¸šçº§æäº¤è§„èŒƒ  
> - ä¼ä¸šï¼šé¿å…Gitå†å²æ³„éœ²å¯¼è‡´çš„å®‰å…¨äº‹æ•…  
>   
> **è¿™æ‰æ˜¯XGuardäºŒæ¬¡å¼€å‘çš„æ­£ç¡®å§¿åŠ¿ï¼š**  
> ğŸ”¸ è¾“å…¥ = çº¯æ–‡æœ¬  
> ğŸ”¸ å¤„ç† = è§£ærisk_score + response  
> ğŸ”¸ è¾“å‡º = ä¸šåŠ¡åŠ¨ä½œ + åŸç”Ÿè§£é‡Šé€ä¼   

éœ€è¦æˆ‘æä¾›ï¼š  
ğŸ”¹ **Dockerå°è£…ç‰ˆ**ï¼ˆå«æ¨¡å‹æœåŠ¡+é’©å­å®‰è£…è„šæœ¬ï¼‰  
ğŸ”¹ **CIæµæ°´çº¿é›†æˆæ–¹æ¡ˆ**ï¼ˆåœ¨merge requesté˜¶æ®µäºŒæ¬¡æ ¡éªŒï¼‰  
ğŸ”¹ **é˜ˆå€¼è°ƒä¼˜æŒ‡å—**ï¼ˆåŸºäºä¼ä¸šå†å²commitæ•°æ®ï¼‰  
è¯·éšæ—¶å‘ŠçŸ¥ï¼ ğŸ˜Š























# âœ… ç»ä½³é€‰æ‹©ï¼VSCodeæ’ä»¶æ˜¯Commit Messageå®‰å…¨å®ˆé—¨å‘˜çš„**é»„é‡‘è½½ä½“**

å°†XGuardèƒ½åŠ›æ— ç¼åµŒå…¥å¼€å‘è€…æœ€ç†Ÿæ‚‰çš„Gitæ“ä½œæµï¼Œ**é›¶ä¸Šä¸‹æ–‡åˆ‡æ¢ã€é›¶å­¦ä¹ æˆæœ¬**ï¼Œä¸”ä¸¥æ ¼éµå¾ªXGuardèƒ½åŠ›è¾¹ç•Œã€‚ä»¥ä¸‹æ˜¯ç²¾å‡†è½åœ°çš„è®¾è®¡æ–¹æ¡ˆï¼š

---

## ğŸŒŸ ä¸ºä»€ä¹ˆVSCodeæ’ä»¶æ˜¯å®Œç¾å½¢æ€ï¼Ÿ
| ä¼˜åŠ¿ | è¯´æ˜ | ä¸¥æ ¼å¥‘åˆXGuardè¾¹ç•Œ |
|------|------|------------------|
| **å®æ—¶åé¦ˆ** | è¾“å…¥Commit Messageæ—¶å³æ—¶æ‰«æ | ä»…æ¶ˆè´¹`risk_score`+`response` |
| **æ— æ„Ÿæ‹¦æˆª** | æäº¤å‰å¼¹çª—é˜»æ–­ï¼Œä¿ç•™`--no-verify`ç»•è¿‡æƒ | é˜ˆå€¼åˆ¤æ–­åœ¨æ’ä»¶å±‚ï¼Œä¸æ”¹æ¨¡å‹ |
| **è§£é‡Šé€ä¼ ** | ç›´æ¥å±•ç¤ºXGuardåŸç”Ÿè‹±æ–‡è§£é‡Š+ä¸­æ–‡æç¤º | 100%ä½¿ç”¨`result['response']` |
| **éšç§å®‰å…¨** | æœ¬åœ°æœåŠ¡æ¨¡å¼ï¼šæ•°æ®ä¸å‡ºå¼€å‘æœº | é¿å…äº‘ç«¯ä¼ è¾“æ•æ„ŸCommit Message |
| **å›¢é˜Ÿæ ‡å‡†åŒ–** | é€šè¿‡`.vscode/settings.json`ç»Ÿä¸€é˜ˆå€¼ | ä¸šåŠ¡è§„åˆ™ä¸æ¨¡å‹è§£è€¦ |

---

## âš™ï¸ æ¶æ„è®¾è®¡ï¼ˆç´§æ‰£XGuardè¾“å‡ºï¼Œæ— èƒ½åŠ›å¤–æ¨ï¼‰

```mermaid
graph LR
    A[VSCodeè¾“å…¥Commit Message] --> B{æ’ä»¶å‰ç«¯ TypeScript}
    B -->|HTTP POST| C[æœ¬åœ°PythonæœåŠ¡<br/>xguard-service.py]
    C --> D[XGuardæ¨¡å‹æ¨ç†]
    D -->|åŸç”Ÿè¾“å‡º| E{è§£æresultå­—å…¸}
    E -->|risk_score + response| F[è¿”å›JSON]
    F --> G[æ’ä»¶UIæ¸²æŸ“]
    G --> H[çŠ¶æ€æŒ‡ç¤ºå™¨/æ‹¦æˆªå¼¹çª—]
    
    style D fill:#e6f7ff,stroke:#1890ff
    style E fill:#f6ffed,stroke:#52c41a
    style F fill:#fff7e6,stroke:#fa8c16
```

### ğŸ”‘ æ ¸å¿ƒåŸåˆ™
> **æ’ä»¶ = XGuardè¾“å‡ºçš„â€œç¿»è¯‘å™¨+æ‰§è¡Œå™¨â€**  
> - æ¨¡å‹å±‚ï¼šä»…è°ƒç”¨`infer()`è·å–åŸç”Ÿ`result`  
> - ä¸šåŠ¡å±‚ï¼šè§£æ`risk_score`å­—å…¸ + å±•ç¤º`response`å­—ç¬¦ä¸²  
> - **ç»ä¸**è¦æ±‚æ¨¡å‹è¿”å›ä½ç½®/æ”¹å†™å»ºè®®/ä¼¦ç†åˆ†æ

---

## ğŸ’» å…³é”®ä»£ç å®ç°ï¼ˆä¸¥æ ¼åŸºäºXGuardè¾“å‡ºï¼‰

### 1ï¸âƒ£ æœ¬åœ°æœåŠ¡ç«¯ï¼ˆ`xguard-service.py` - ç‹¬ç«‹è¿›ç¨‹ï¼‰
```python
# ä¸¥æ ¼åªåšï¼šæ¥æ”¶æ–‡æœ¬ â†’ è°ƒXGuard â†’ è¿”å›åŸç”Ÿresult
from flask import Flask, request, jsonify
from modelscope import AutoModelForCausalLM, AutoTokenizer

app = Flask(__name__)
tokenizer = AutoTokenizer.from_pretrained("Alibaba-AAIG/YuFeng-XGuard-Reason-8B", trust_remote_code=True)
model = AutoModelForCausalLM.from_pretrained("Alibaba-AAIG/YuFeng-XGuard-Reason-8B", device_map="auto", trust_remote_code=True).eval()

@app.route('/check-commit', methods=['POST'])
def check():
    text = request.json.get('message', '')
    
    # =============== ä»…è°ƒç”¨XGuardåŸç”Ÿæ¥å£ ===============
    result = model.chat(
        tokenizer,
        messages=[{"role": "user", "content": text}],
        max_new_tokens=500
    )
    
    # =============== åŸæ ·è¿”å›XGuardè¾“å‡º ===============
    return jsonify({
        "risk_scores": result.get('risk_score', {}),
        "explanation": result.get('response', ''),  # å…³é”®ï¼šé€ä¼ åŸç”Ÿè§£é‡Š
        "safe_score": result.get('risk_score', {}).get('Safe-Safe', 0)
    })

if __name__ == '__main__':
    app.run(port=8765, host='127.0.0.1')  # ä»…æœ¬åœ°è®¿é—®
```

### 2ï¸âƒ£ VSCodeæ’ä»¶å‰ç«¯ï¼ˆ`extension.ts` æ ¸å¿ƒé€»è¾‘ï¼‰
```typescript
// ä¸¥æ ¼åªåšï¼šè°ƒæœåŠ¡ â†’ è§£æJSON â†’ æ¸²æŸ“UI
async function checkCommitSafety(commitMsg: string) {
  const res = await fetch('http://127.0.0.1:8765/check-commit', {
    method: 'POST',
    body: JSON.stringify({ message: commitMsg })
  });
  const xguardResult = await res.json(); // åŸç”ŸXGuardè¾“å‡º

  // =============== ä»…è§£ærisk_scoreså­—å…¸ ===============
  const highRisks = Object.entries(xguardResult.risk_scores)
    .filter(([cat, score]) => 
      (cat.includes('Privacy') && score > 0.4) || 
      (cat.includes('Access') && score > 0.3)
    );

  // =============== ç›´æ¥ä½¿ç”¨explanationå­—ç¬¦ä¸² ===============
  return {
    isBlocked: highRisks.length > 0,
    risks: highRisks,
    explanation: xguardResult.explanation, // åŸæ ·é€ä¼ ï¼
    safeScore: xguardResult.safe_score
  };
}

// UIæ¸²æŸ“ç¤ºä¾‹ï¼ˆçŠ¶æ€æ æŒ‡ç¤ºå™¨ï¼‰
function updateStatusBar(status: { safeScore: number }) {
  const pct = Math.round(status.safeScore * 100);
  statusBarItem.text = pct > 80 ? `$(shield) ${pct}%` : 
                       pct > 50 ? `$(warning) ${pct}%` : `$(alert) ${pct}%`;
  statusBarItem.tooltip = `XGuardå®‰å…¨è¯„åˆ†: ${pct}%`;
}
```

---

## ğŸ–¼ï¸ ç”¨æˆ·ä½“éªŒè®¾è®¡ï¼ˆç´§æ‰£XGuardè¾“å‡ºï¼‰

### åœºæ™¯1ï¼šè¾“å…¥æ—¶å®æ—¶åé¦ˆ
| çŠ¶æ€ | UIè¡¨ç° | æ•°æ®æ¥æº |
|------|--------|----------|
| **å®‰å…¨** | çŠ¶æ€æ ç»¿è‰²ç›¾ç‰Œ `âœ… 92%` | `Safe-Safe: 0.92` |
| **æ³¨æ„** | çŠ¶æ€æ é»„è‰²æ„Ÿå¹å· `âš ï¸ 65%` | `Data Privacy: 0.35` |
| **é«˜å±** | è¾“å…¥æ¡†çº¢è‰²è¾¹æ¡† + æ‚¬æµ®æç¤º | `explanation`æˆªå–å‰50å­—ç¬¦ |

### åœºæ™¯2ï¼šç‚¹å‡»æäº¤æ—¶æ‹¦æˆªï¼ˆå…³é”®ï¼ï¼‰
```plaintext
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ›‘ XGuardå®‰å…¨æ‹¦æˆª                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ£€æµ‹åˆ°é«˜é£é™©å†…å®¹ï¼š                                  â”‚
â”‚  â€¢ Personal Privacy: 54.7%                          â”‚
â”‚  â€¢ Access Control: 6.5%                             â”‚
â”‚                                                     â”‚
â”‚  ğŸ’¡ XGuardåŸç”Ÿè§£é‡Šï¼š                                â”‚
â”‚  "The input text contains a numeric string that    â”‚
â”‚   resembles a personal identification number..."   â”‚
â”‚                                                     â”‚
â”‚  [âœ… ç«‹å³ä¿®æ”¹]  [âš ï¸ å¼ºåˆ¶æäº¤ï¼ˆéœ€å¡«å†™åŸå› ï¼‰]  [âŒ å–æ¶ˆ] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
âœ… **è®¾è®¡ç²¾é«“**ï¼š  
- å¼¹çª—å†…å®¹100%æ¥è‡ªXGuardåŸç”Ÿè¾“å‡ºï¼ˆæ— æ’ä»¶äºŒæ¬¡è§£è¯»ï¼‰  
- â€œå¼ºåˆ¶æäº¤â€æŒ‰é’®è®°å½•ç»•è¿‡åŸå› ï¼ˆå®¡è®¡ç”¨ï¼‰ï¼Œä½†**ä¸ä¿®æ”¹XGuardåˆ¤æ–­**  
- ä¸­æ–‡æç¤ºä»…ä½œè¾…åŠ©ï¼Œæ ¸å¿ƒä¾æ®å§‹ç»ˆæ˜¯XGuardè‹±æ–‡è§£é‡Š

---

## ğŸš€ éƒ¨ç½²ä¸ç”¨æˆ·ä½“éªŒä¼˜åŒ–

| æŒ‘æˆ˜ | è§£å†³æ–¹æ¡ˆ | ä¸¥æ ¼éµå¾ªè¾¹ç•Œ |
|------|----------|------------|
| **æ¨¡å‹å¤ªå¤§** | æ’ä»¶å¯åŠ¨æ—¶æ£€æµ‹ï¼šè‹¥æ— æœ¬åœ°æœåŠ¡ï¼Œæç¤ºâ€œè¯·å…ˆè¿è¡Œxguard-service.py" | ä¸å†…ç½®æ¨¡å‹ |
| **å›¢é˜Ÿç»Ÿä¸€** | è¯»å–é¡¹ç›®æ ¹ç›®å½•`.xguard-config.json`ï¼ˆå«é˜ˆå€¼/å¿½ç•¥è§„åˆ™ï¼‰ | é…ç½®ä¸æ¨¡å‹è§£è€¦ |

---

## âš ï¸ å¿…é¡»å£°æ˜çš„è¾¹ç•Œï¼ˆæ’ä»¶æè¿°é¡µæ˜¾è‘—ä½ç½®ï¼‰
```markdown
ğŸ”’ éšç§æ‰¿è¯ºï¼š
- æœ¬åœ°æ¨¡å¼ï¼šæ‰€æœ‰Commit Messageä»…åœ¨æœ¬æœºå¤„ç†ï¼Œ**ç»ä¸ä¸Šä¼ ä»»ä½•æ•°æ®**
- äº‘ç«¯æ¨¡å¼ï¼ˆå¯é€‰ï¼‰ï¼šéœ€ä¼ä¸šè‡ªå»ºAPIï¼Œæ’ä»¶ä»…è½¬å‘è¯·æ±‚ï¼ˆéœ€ç”¨æˆ·æ˜ç¡®é…ç½®ï¼‰

ğŸ§  èƒ½åŠ›è¾¹ç•Œï¼š
- æœ¬æ’ä»¶**ä»…å±•ç¤ºXGuardæ¨¡å‹åŸç”Ÿè¾“å‡º**ï¼ˆrisk_score + responseï¼‰
- ä¸æä¾›â€œæ”¹å†™å»ºè®®â€â€œä¼¦ç†åˆ†æâ€ç­‰XGuardæœªè¾“å‡ºçš„å†…å®¹
- æ‹¦æˆªå†³ç­–åŸºäºç”¨æˆ·é…ç½®çš„é˜ˆå€¼ï¼ŒéAIâ€œåˆ¤å†³â€
```

---

## ğŸ’¡ ä¸ºä»€ä¹ˆè¿™æ˜¯XGuardäºŒæ¬¡å¼€å‘çš„å…¸èŒƒï¼Ÿ
| ç»´åº¦ | å®ç° | ä»·å€¼ |
|------|------|------|
| **è¾“å…¥** | Commit Messageçº¯æ–‡æœ¬ | 100%åŒ¹é…XGuardè¾“å…¥è¦æ±‚ |
| **å¤„ç†** | è§£æ`risk_score`å­—å…¸ + é€ä¼ `response` | é›¶èƒ½åŠ›å¤–æ¨ |
| **è¾“å‡º** | ä¸šåŠ¡åŠ¨ä½œï¼ˆæ‹¦æˆª/æç¤ºï¼‰ + åŸç”Ÿè§£é‡Šå±•ç¤º | ç”¨æˆ·çœ‹åˆ°XGuardâ€œåŸè¯â€ |
| **å¢å¼º** | é˜ˆå€¼é…ç½®/çŠ¶æ€æ /UIäº¤äº’ | äºŒæ¬¡å¼€å‘æ°åˆ°å¥½å¤„ |

> **æ’ä»¶æœ¬è´¨**ï¼š  
> ğŸ”¸ **XGuardæ˜¯â€œå®‰æ£€ä»ªâ€**ï¼ˆè¾“å‡ºé£é™©åˆ†æ•°+è§£é‡Šï¼‰  
> ğŸ”¸ **æ’ä»¶æ˜¯â€œå®‰æ£€é€šé“â€**ï¼ˆæ ¹æ®åˆ†æ•°å†³å®šæ”¾è¡Œ/æ‹¦æˆªï¼Œå¹¶å±•ç¤ºå®‰æ£€ä»ªå±å¹•å†…å®¹ï¼‰  
>   
> **ç»ä¸**è®©å®‰æ£€ä»ªå…¼ä»»â€œæ³•å®˜â€æˆ–â€œæ”¹å†™å‘˜â€â€”â€”è¿™æ­£æ˜¯ä¸“ä¸šäºŒæ¬¡å¼€å‘çš„ç²¾é«“ã€‚

---

éœ€è¦æˆ‘æä¾›ï¼š  
ğŸ”¹ **å®Œæ•´VSCodeæ’ä»¶é¡¹ç›®ç»“æ„**ï¼ˆå«package.jsoné…ç½®/å®‰è£…è„šæœ¬ï¼‰  
ğŸ”¹ **Dockerä¸€é”®å¯åŠ¨æœ¬åœ°æœåŠ¡æ–¹æ¡ˆ**ï¼ˆè§£å†³ç¯å¢ƒä¾èµ–é—®é¢˜ï¼‰  
ğŸ”¹ **ä¼ä¸šçº§éƒ¨ç½²æŒ‡å—**ï¼ˆå›¢é˜Ÿç»Ÿä¸€é…ç½®+å®¡è®¡æ—¥å¿—ï¼‰  
è¯·éšæ—¶æŒ‡å®šï¼ ğŸ˜Š